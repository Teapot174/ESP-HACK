#ifndef GPIO_MENU_H
#define GPIO_MENU_H

#include "display.h"
#include "CONFIG.h"

#define GPIO_MENU_ITEM_COUNT 3
static const char* gpioMenuItems[] = {"iButton", "NRF24", "Serial"};

static const unsigned char PROGMEM image_Scanning_short_bits[] = {
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x0f,0x00,0xe0,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x35,0xc0,0x18,0x00,0x00,
  0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x6a,0xa0,0x06,0x00,0x00,0x00,0x01,0x40,0x00,0x00,0x00,0x00,0x81,0x50,0x01,
  0x00,0x00,0x00,0x01,0x40,0x00,0x00,0x00,0x01,0x00,0xa8,0x00,0x80,0x00,0x00,0x02,0x40,0x00,0x00,0x00,0x02,0x00,
  0x1c,0x00,0x40,0x00,0x00,0x02,0x40,0x00,0x00,0x00,0x04,0x00,0x2e,0x00,0x20,0x00,0x00,0x02,0x41,0x80,0x00,0x00,
  0x04,0x00,0x16,0x00,0x20,0x00,0x00,0x04,0x41,0x40,0x60,0x00,0x08,0x00,0x0b,0x07,0xf0,0x00,0x00,0x04,0x41,0x40,
  0x50,0x30,0x08,0x00,0x05,0x38,0x08,0x00,0x00,0x04,0x41,0x40,0x50,0x28,0x10,0x07,0xcb,0xc0,0x08,0x00,0x00,0x08,
  0x41,0x40,0x50,0x28,0x10,0x09,0xe5,0x02,0x24,0x00,0x00,0x08,0x41,0x40,0x50,0x28,0x10,0x13,0xfe,0x21,0x14,0x00,
  0x00,0x08,0x21,0x40,0x50,0xff,0x11,0xe6,0x7c,0x11,0x14,0x00,0x00,0x08,0x21,0x5f,0xff,0xff,0x22,0x26,0x74,0x11,
  0x14,0x00,0x00,0x08,0x3f,0xf5,0xff,0xa8,0x22,0x27,0xf4,0x11,0x54,0x00,0x00,0x18,0x2b,0xfb,0xf8,0x28,0x22,0x27,
  0xf4,0x0a,0xff,0x00,0x7f,0xf8,0x37,0xfc,0x50,0x28,0x22,0x23,0xf4,0x57,0x00,0x80,0x80,0x58,0x3f,0x40,0x50,0x28,
  0x21,0x11,0xf4,0xb8,0x00,0x41,0xbe,0x78,0x21,0x40,0x50,0x18,0x61,0xf8,0x63,0x60,0x00,0x21,0xbe,0x68,0x21,0x40,
  0x50,0x00,0x62,0xaf,0xc3,0x80,0x00,0x22,0x80,0x44,0x21,0x40,0x30,0x00,0xe1,0x50,0x3e,0x00,0x00,0x22,0xc0,0x44,
  0x11,0x40,0x00,0x00,0xa2,0xa0,0x10,0x00,0x7e,0x25,0xc0,0x42,0x11,0x40,0x00,0x00,0x61,0x60,0x00,0x03,0x81,0xa5,
  0xe0,0x42,0x10,0xc0,0x00,0x00,0xa0,0x00,0x00,0x0c,0x00,0x4b,0xff,0x81,0x10,0x00,0x00,0x00,0x60,0x00,0x00,0x30,
  0x00,0x4b,0xf8,0x01,0x10,0x00,0x00,0x00,0xa0,0x01,0x00,0xc0,0x00,0x8b,0xf8,0x00,0x90,0x00,0x00,0x00,0x60,0x00,
  0x87,0x00,0x01,0x97,0xf0,0x00,0x48,0x00,0x00,0x00,0xa0,0x00,0x78,0x00,0x03,0x17,0xf0,0x00,0x28,0x00,0x00,0x00,
  0x60,0x00,0x00,0x00,0x0e,0x77,0xf0,0x00,0x18,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x3c,0x9f,0xf0,0x00,0x00,0x00,
  0x00,0x00,0xc0,0x00,0x00,0x55,0xf9,0x0f,0xf0,0x00,0x00,0x00,0x00,0x00,0x80,0x02,0xaa,0xbf,0xfa,0x0f,0xe8,0x00,
  0x00,0x00,0x00,0x00,0xc0,0x01,0x57,0xff,0xfc,0x07,0xe8,0x00,0x00,0x00,0x00,0x00,0x80,0x02,0xab,0xff,0xf8,0x07,
  0xe8,0x00,0x00,0x00,0x00,0x00,0x40,0x01,0x55,0xff,0xf0,0x07,0xc8,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0xaa,0xaa,
  0xc0,0x0f,0xa8,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x55,0x55,0x00,0x0d,0x50,0x00,0x00,0x00,0x00,0x00,0x80,0x00,
  0x2a,0xae,0x00,0x1a,0xb0,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x15,0xf0,0x00,0x15,0x60,0x00,0x00,0x00,0x00,0x00,
  0xa0,0x00,0x3e,0x00,0x00,0x3a,0xc0,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x75,0x80,0x00,0x00,0x00,
  0x00,0x00,0xa0,0x00,0x00,0x00,0x00,0xeb,0x00,0x00,0x00,0x00,0x00,0x00,0x50,0x00,0x00,0x00,0x01,0xde,0x00,0x00,
  0x00,0x00,0x00,0x00,0xa8,0x00,0x00,0x00,0x03,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x54,0x00,0x00,0x00,0x0f,0xe0,
  0x00,0x00,0x00,0x00,0x00,0x00,0xaa,0x00,0x00,0x00,0x3f,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x00,0x00,0x00,
  0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

static const unsigned char PROGMEM image_iButtonKey_bits[] = {0x00,0x00,0x00,0x00,0x00,0xfc,0x00,0x00,0x00,0x00,
  0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x0c,0x01,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x80,0x00,0x00,0x00,0x00,
  0x40,0x00,0x80,0x00,0x00,0x00,0x01,0x80,0x00,0x80,0x00,0x00,0x00,0x06,0x00,0x00,0x80,0x00,0x00,0x00,0x08,0x00,
  0x01,0x00,0x00,0x00,0x00,0x30,0x00,0x02,0x00,0x00,0x00,0x00,0x40,0x00,0x04,0x00,0x00,0x00,0x00,0x80,0x00,0x08,
  0x00,0x00,0x00,0x03,0x00,0x00,0x10,0x00,0x00,0x00,0x0c,0x00,0x00,0x20,0x00,0x00,0x00,0x10,0x00,0x00,0x40,0x00,
  0x00,0x00,0x60,0x00,0x00,0x80,0x00,0x00,0x00,0x80,0x00,0x03,0x00,0x00,0x00,0x0f,0xf0,0x00,0x04,0x00,0x00,0x00,
  0x30,0x0c,0x00,0x08,0x00,0x00,0x00,0xc0,0x02,0x00,0x30,0x00,0x00,0x01,0x00,0x01,0x00,0x40,0x00,0x00,0x02,0x00,
  0x01,0x80,0x80,0x00,0x00,0x04,0x00,0x01,0xc1,0x00,0x00,0x00,0x08,0x00,0x01,0xe2,0x00,0x00,0x00,0x10,0x00,0x01,
  0xf2,0x00,0x00,0x00,0x20,0x00,0x03,0xf2,0x00,0x00,0x00,0x20,0x00,0x02,0xf2,0x00,0x00,0x00,0x40,0x00,0x03,0x72,
  0x00,0x00,0x00,0x40,0x00,0x06,0xa2,0x00,0x00,0x00,0x80,0x00,0x05,0x62,0x00,0x00,0x00,0x80,0x00,0x0c,0xa2,0x00,
  0x00,0x00,0x80,0x00,0x19,0x42,0x00,0x00,0x00,0x80,0x00,0x30,0x44,0x00,0x00,0x00,0x80,0x00,0x40,0x84,0x00,0x00,
  0x00,0x80,0x00,0x81,0x88,0x00,0x00,0x00,0xc0,0x03,0x03,0x08,0x00,0x00,0x00,0x60,0x1e,0x02,0x10,0x00,0x00,0x00,
  0x3f,0xf0,0x04,0x20,0x00,0x00,0x00,0x1e,0xaa,0x88,0x40,0x00,0x00,0x00,0x0f,0x50,0x70,0x80,0x00,0x00,0x00,0x07,
  0xab,0xc1,0x00,0x00,0x00,0x00,0x03,0xfe,0x02,0x00,0x00,0x00,0x00,0x01,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0xf0,
  0xf0,0x00,0x00,0x00,0x00,0x00,0x0f,0x00,0x00,0x00,0x00,0x00
};

static const unsigned char PROGMEM image_iButtonDolphinSuccess_bits[] = {
  0x00,0x00,0x03,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1d,0x00,0xf0,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x60,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xd0,0x00,0x03,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x06,0x80,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0d,0x40,0x00,0x00,0x20,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1a,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x35,0x00,0x00,
  0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x68,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xd4,
  0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,
  0x01,0x54,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xa0,0x00,0x7c,0x00,0x02,0x00,0x00,0x00,0x00,
  0x00,0x00,0x03,0x50,0x01,0x83,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x80,0x02,0x3e,0x80,0x01,0x00,0x00,
  0x00,0x00,0x10,0x00,0x03,0x50,0x04,0x79,0xc0,0x01,0x00,0x00,0x00,0x02,0x10,0x00,0x06,0x80,0x04,0xf0,0xc0,0x00,
  0x80,0x00,0x00,0x22,0x20,0x00,0x05,0x50,0x08,0xf0,0xe0,0x00,0x80,0x00,0x00,0x10,0x22,0x00,0x06,0x80,0x09,0xf9,
  0xe0,0x00,0x80,0x00,0x00,0x11,0x84,0x00,0x05,0x50,0x09,0xff,0x20,0x00,0x8f,0xc0,0x00,0x86,0x70,0x00,0x0a,0x00,
  0x09,0xfd,0x60,0x00,0xf0,0x30,0x00,0x48,0x68,0x30,0x0d,0x50,0x09,0xff,0xe0,0x03,0x80,0x08,0x00,0x10,0xa8,0xc0,
  0x0a,0x00,0x04,0xfe,0xc0,0x1c,0x00,0x04,0x02,0x10,0xab,0x00,0x0d,0x50,0x04,0xff,0xc0,0xe0,0x00,0x04,0x01,0xa1,
  0x48,0x00,0x0a,0x00,0x02,0xc0,0xc0,0x00,0x00,0x04,0x00,0x26,0x98,0x00,0x0d,0x50,0x01,0x80,0x20,0x00,0x00,0xfc,
  0x00,0x19,0x33,0xa0,0x0a,0x00,0x01,0x00,0x00,0x00,0x07,0x04,0x03,0x2e,0x60,0x00,0x0d,0x50,0x01,0x00,0x00,0x00,
  0x18,0x04,0x04,0x60,0xcc,0x00,0x0a,0x00,0x00,0x00,0x00,0x00,0x60,0x04,0x00,0x43,0x83,0x00,0x0d,0x50,0x00,0x00,
  0x00,0x01,0x80,0x04,0x01,0x46,0x20,0xc0,0x1a,0x00,0x00,0x04,0x00,0x06,0x00,0x08,0x00,0x44,0x90,0x00,0x15,0x50,
  0x00,0x04,0x00,0x18,0x00,0x10,0x00,0x84,0x88,0x00,0x1a,0x00,0x00,0x02,0x00,0x60,0x00,0x20,0x00,0x8c,0x40,0x00,
  0x15,0x50,0x00,0x01,0x83,0x80,0x00,0xc0,0x00,0x88,0x40,0x00,0x1a,0x00,0x00,0x00,0x7c,0x00,0x01,0x00,0x01,0x08,
  0x00,0x00,0x15,0x50,0x00,0x00,0x00,0x00,0x06,0x00,0x01,0x18,0x00,0x00,0x3a,0x00,0x00,0x00,0x00,0x00,0x08,0x00,
  0x01,0x10,0x00,0x00,0x35,0x54,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x90,0x00,0x00,0x7a,0x80,0x00,0x00,0x00,0x00,
  0x40,0x00,0x3c,0x60,0x00,0x00,0x75,0x54,0x00,0x00,0x00,0x03,0xc0,0x00,0x42,0x03,0x80,0x00,0xfa,0xa0,0x00,0x00,
  0x00,0x1f,0xc0,0x00,0x81,0x0c,0x40,0x00,0xf5,0x55,0x00,0x00,0x00,0xff,0x40,0x01,0x01,0x10,0x20,0x00,0xfa,0xa0,
  0x00,0x00,0x03,0xff,0x40,0x06,0x01,0x20,0x20,0x00,0xf5,0x55,0x40,0x00,0x00,0xfc,0x40,0x08,0x01,0x40,0x20,0x00,
  0xfa,0xa0,0x00,0x20,0x00,0x00,0x60,0x10,0x01,0x80,0x20,0x00,0xf5,0x55,0x00,0x18,0x00,0x00,0x70,0x60,0x01,0x00,
  0x40,0x00,0xea,0x80,0x00,0x06,0x00,0x00,0x7f,0x80,0x02,0x00,0x40,0x00,0xf5,0x54,0x00,0x01,0x80,0x00,0x7e,0x00,
  0x02,0x00,0x40,0x00,0xea,0x00,0x00,0x00,0x70,0x00,0xf0,0x00,0x04,0x00,0x80,0x00,0xf5,0x54,0x00,0x00,0x0f,0xff,
  0x00,0x00,0x04,0x00,0x80,0x00,0xea,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x01,0x00,0x00,0xf5,0x50,0x00,0x00,
  0x00,0x00,0x00,0x00,0x08,0x02,0x00,0x00,0xe8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x02,0x00,0x00,0xd5,0x50,
  0x00,0x00,0x00,0x00,0x00,0x00,0x2a,0x04,0x00,0x00,0xe8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x55,0x48,0x00,0x00
};


inline void displayGPIOMenu(DisplayType &display, byte menuIndex) {
  display.clearDisplay();
  
  auto centerText = [](const char* text, int textSize) {
    return (128 - strlen(text) * (textSize == 2 ? 12 : 6)) / 2;
  };

  byte next = (menuIndex + 1) % GPIO_MENU_ITEM_COUNT;
  byte prev = (menuIndex + GPIO_MENU_ITEM_COUNT - 1) % GPIO_MENU_ITEM_COUNT;

  display.setTextSize(2);
  display.setCursor(centerText(gpioMenuItems[menuIndex], 2), 25);
  display.print(gpioMenuItems[menuIndex]);
  
  display.setTextSize(1);
  display.setCursor(centerText(gpioMenuItems[next], 1), 50);
  display.print(gpioMenuItems[next]);
  display.setCursor(centerText(gpioMenuItems[prev], 1), 7);
  display.print(gpioMenuItems[prev]);
  
  display.setCursor(2, 30);
  display.print(">");
  display.setCursor(120, 30);
  display.print("<");
  
  display.display();
}

#endif
